from fastapi import APIRouter
import psutil

router = APIRouter()

@router.get("/health")
async def health():
    status = "OK"
    memory_usage = psutil.virtual_memory()._asdict()
    cpu_usage = psutil.cpu_times()._asdict()
    return {"status": status, "memory_usage": memory_usage, "cpu_usage": cpu_usage}